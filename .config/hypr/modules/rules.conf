#----------------------------------------------------------
#--  HACK: Rules
#----------------------------------------------------------

##  INFO: Network manager popup ---
# Network manager
windowrule {
  name = network-manager
  float = 1
  match:class = ^(nm-connection-editor)$
}

# Wifi manager (iwgkt)
windowrule {
  name = wifi-manager 
  float = 1
  size = 600 600
  center = on
  match:class = ^(org.twosheds.iwgtk)$
}

windowrule {
  name = wifi-manager2
  float = 1
  size = 300 100
  center = on
  match:class = ^(iwgtk)$
}

##  INFO: Quality ---
# Ignore maximize requests from apps
windowrule {
  name = ignore-maximize 
  suppress_event = maximize
  match:class = .*
}

# Fix some dragging issues with XWayland
windowrule {
  name = dragging-issues
  no_focus = on
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
}

##  INFO: Firefox ---
windowrule {
  name = firefox-popups
  float = on
  match:class = ^(firefox)$
  match:title = ^(Save As|Opening|Library|Extension:.*)$
}

windowrule {
  name = file-picker-popup
  float = on
  size = 800 600
  match:class = ^(xdg-desktop-portal-gtk)$
}

windowrule {
  name = picture-in-picture
  float = on
  pin = on
  match:class = ^(firefox)$
  match:title = ^(Picture-in-Picture)$
}

windowrule {
  name = firefox-about
  float = on
  match:class = ^(firefox)$
  match:title = ^(About Mozilla Firefox)$
}

#  INFO: Skip animation for hyprpicker ---
layerrule {
  name = hyprpicker
  no_anim = on
  match:namespace = hyprpicker
}

#  INFO: Audio manager popup ---
windowrule {
  name = audio-manager
  float = on
  match:class = ^(org.pulseaudio.pavucontrol)$
}

#  INFO: Pacseek "Package installer" ---
windowrule {
  name = pacseek
  float = on
  size = 1000 600
  center = on
  match:class = ^(appgrid-pacseek)$
}

#  INFO: Nautilus ---
windowrule {
  name = nautilus
  float = on
  size = 1100 650
  center = on
  match:class = ^(org.gnome.Nautilus)$
  match:title = ^..*$
}

# Popups
windowrule {
    name = nautilus-popups
    float = on
    center = on
    match:class = ^(org.gnome.Nautilus)$
    match:title = ^(.*(Confirm|Copying|Moving|Deleting|Extracting|Compressing|Properties|completed).*)$
}

# Delete popup or other confirmation popups
windowrule {
    name = nautilus-popup2
    float = on
    center = on
    match:class = ^(org.gnome.Nautilus)$
    match:title = ^$
}

# Xdg popup
windowrule {
    name = nautilus-xdg
    float = on
    match:class = ^(xdg-desktop-portal-gnome)$^(xdg-desktop-portal-gnome)$
}

# Progress
windowrule {
    name = nautilus-progress
    float = on
    match:title = ^(File Operation Progress)$
}

# Sushi extension
windowrule {
  name = sushi
  float = on
  size = 900 600
  center = on
  match:class = ^(org.gnome.NautilusPreviewer)$
}

#  INFO: Waybar ---
layerrule {
  name = waybar
  blur = on
  ignore_alpha = 0.2
  match:namespace = waybar
}

#  INFO: Rofi ---
layerrule {
  name = rofi
  blur = on
  ignore_alpha = 0.5
  match:namespace = rofi
}

#  INFO: Nemo ---
windowrule {
  name = nemo
  float = on
  size = 1100 650
  center = on
  match:class = ^(nemo)$
  match:title = ^..*$
}

# Popups
windowrule {
    name = nemo-popups
    float = on
    center = on
    match:class = ^(nemo)$
    match:title = ^(.*(Confirm|Copying|Moving|Deleting|Extracting|Compressing|Properties|completed).*)$
}

# Delete popup or other confirmation popups
windowrule {
    name = nemo-popup2
    float = on
    center = on
    match:class = ^(nemo)$
    match:title = ^$
}

#  INFO: Swaync ---
layerrule {
  name = swaync
  animation = slide left
  blur = on
  ignore_alpha = 0
  match:namespace = swaync-control-center
}

layerrule {
  name = swaync2
  animation = slide left
  blur = on
  ignore_alpha = 0
  match:namespace = swaync-notification-window
}

#  INFO: Swayosd ---
layerrule {
  name = swayosd
  blur = on
  ignore_alpha = 0
  match:namespace = swayosd
}

#  INFO: Nwgui ---
windowrule {
  name = wifi-manager-gtk
  float = on
  center = on
  match:class = ^(com.network.manager)$
}

#  INFO: Frog OCR ---
windowrule {
  name = frog
  float = on
  size = (monitor_w*0.4) (monitor_h*0.8)
  center = on
  stay_focused = on
  pin = on
  match:class = (com.github.tenderowl.frog)
}

#  INFO: Gnome calc ---
windowrule {
  name = gnome-calculator
  float = on
  center = on
  size = 385 616
  match:class = ^(org.gnome.Calculator)$
}

#  INFO: Mission center ---
windowrule {
  name = missioncenter
  float = on
  center = on
  size = 1170 685
  match:class = ^(io.missioncenter.MissionCenter)$
}

#  INFO: Zen ---
# Generic Popups (File Managers, Uploads, Libraries) ---
windowrule {
    name = zen-popups
    float = on
    center = on
    match:class = ^(zen.*)$
    match:title = ^(Open File|Select a File|Choose wallpaper|Open Folder|Save As|Library|File Upload)$
}

# Picture-in-Picture ---
windowrule {
    name = zen-pip
    float = on
    pin = on
    match:class = ^(zen.*)$
    match:title = ^(Picture-in-Picture)$
}

# About & Settings ---
windowrule {
    name = zen-about
    float = on
    center = on
    match:class = ^(zen.*)$
    match:title = ^(About Zen Browser|Zen Browser — Sharing Indicator)$
}

#  INFO: Gedit ---
windowrule {
    name = gedit 
    float = on
    center = on
    size = 1091 714
    match:class = ^(gedit)$
}

#  INFO: Overskride ( Bluetooth gui ) ---
windowrule {
    name = overskride
    float = on
    center = on
    size = 1050 660
    match:class = ^(io.github.kaii_lb.Overskride)$
}

#  INFO: Slurp | Satty ( screenshot ) ---
layerrule {
    name = slurp
    no_anim = on
    match:namespace = ^(selection| slurp)$
}

#  INFO: Software dev ---
windowrule {
    name = dev-auto-float
    float = on
    center = on
    size = 0
    match:title = .*(Float).*
}

#  INFO: Eye of gnome ---
windowrule {
    name = gnome-eye
    float = on
    center = on
    max_size = 1080 700
    match:class = ^(org.gnome.eog)$
}

# Disable blur for xwayland context menus
windowrule = match:class ^()$, match:title ^()$, no_blur on

# Disable blur for every window
windowrule = match:class .*, no_blur on

# Floating
windowrule = match:title ^(Open File)(.*)$, center on
windowrule = match:title ^(Open File)(.*)$, float on
windowrule = match:title ^(Select a File)(.*)$, center on
windowrule = match:title ^(Select a File)(.*)$, float on
windowrule = match:title ^(Open Folder)(.*)$, center on
windowrule = match:title ^(Open Folder)(.*)$, float on
windowrule = match:title ^(Save As)(.*)$, center on
windowrule = match:title ^(Save As)(.*)$, float on
windowrule = match:title ^(Library)(.*)$, center on
windowrule = match:title ^(Library)(.*)$, float on
windowrule = match:title ^(File Upload)(.*)$, center on
windowrule = match:title ^(File Upload)(.*)$, float on
windowrule = match:title ^(.*)(wants to save)$, center on
windowrule = match:title ^(.*)(wants to save)$, float on
windowrule = match:title ^(.*)(wants to open)$, center on
windowrule = match:title ^(.*)(wants to open)$, float on

# stupid dolphin copy
windowrule = match:title ^(Copying — Dolphin)$, move 40 80

# Tiling
windowrule = match:class ^dev\.warp\.Warp$, tile on

# Picture-in-Picture
windowrule = match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$, float on
windowrule = match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$, keep_aspect_ratio on
windowrule = match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$, move (monitor_w*.73) (monitor_h*.72)
windowrule = match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$, size (monitor_w*.25) (monitor_h*.25)
windowrule = match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$, float on
windowrule = match:title ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$, pin on

# --- Tearing ---
windowrule = match:title .*\.exe, immediate on
windowrule = match:title .*minecraft.*, immediate on
windowrule = match:class ^(steam_app).*, immediate on

# Fix Jetbrain IDEs focus/rerendering problem
windowrule = match:class ^jetbrains-.*$, match:float 1, match:title ^$|^\s$|^win\d+$, no_initial_focus on

# No shadow for tiled windows (matches windows that are not floating).
windowrule = match:float 0, no_shadow on

# ######## Layer rules ########
layerrule = match:namespace .*, xray on

layerrule = match:namespace noanim, no_anim on
layerrule = match:namespace gtk-layer-shell, blur on
layerrule = match:namespace gtk-layer-shell, ignore_alpha 0
layerrule = match:namespace launcher, blur on
layerrule = match:namespace launcher, ignore_alpha 0.5
layerrule = match:namespace notifications, blur on
layerrule = match:namespace notifications, ignore_alpha 0.69
layerrule = match:namespace logout_dialog # wlogout, blur on
